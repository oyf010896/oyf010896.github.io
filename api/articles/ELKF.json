{"title":"ELKF日志管理平台搭建","slug":"ELKF","date":"2022-07-29T03:13:29.000Z","updated":"2022-07-29T04:06:01.059Z","comments":true,"path":"api/articles/ELKF.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<h2 id=\"ELKF日志管理平台搭建\"><a href=\"#ELKF日志管理平台搭建\" class=\"headerlink\" title=\"ELKF日志管理平台搭建\"></a>ELKF日志管理平台搭建</h2><h3 id=\"一、安装Filebeat\"><a href=\"#一、安装Filebeat\" class=\"headerlink\" title=\"一、安装Filebeat\"></a>一、安装Filebeat</h3><p>1.下载<a href=\"https://www.elastic.co/cn/downloads/beats/filebeat#ga-release\">Filebeat</a>并上传至服务器&#x2F;home&#x2F;software目录</p>\n<p>2.解压并重命名文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost /]# cd /home/software/</span><br><span class=\"line\">[root@localhost software]# tar -xvf filebeat-7.4.0-linux-x86_64.tar.gz</span><br><span class=\"line\">[root@localhost software]# mv filebeat-7.4.0-linux-x86_64 filebeat</span><br></pre></td></tr></table></figure>\n\n<p>3.修改配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost software]# vim filebeat/filebeat.yml</span><br><span class=\"line\">filebeat.inputs:</span><br><span class=\"line\">- type: log</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">更改为<span class=\"literal\">true</span>以启用此输入配置</span></span><br><span class=\"line\">  enabled: true</span><br><span class=\"line\">  paths:</span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">修改系统日志所在位置</span></span><br><span class=\"line\">    - /var/log/nginx/*.log</span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">to add additional information to the crawled <span class=\"built_in\">log</span> files <span class=\"keyword\">for</span> filtering</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">配置索引名</span></span><br><span class=\"line\">  fields:</span><br><span class=\"line\">     machine: master</span><br><span class=\"line\">     #应用名称</span><br><span class=\"line\">     app: job-center</span><br><span class=\"line\">  multiline.pattern: ^\\[</span><br><span class=\"line\">  multiline.negate: true</span><br><span class=\"line\">  multiline.match: after</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">此处filebeat.inputs可以配置多个</span> </span><br><span class=\"line\"></span><br><span class=\"line\">filebeat.config.modules:</span><br><span class=\"line\">  path: $&#123;path.config&#125;/modules.d/*.yml</span><br><span class=\"line\">  reload.enabled: false</span><br><span class=\"line\">setup.template.settings:</span><br><span class=\"line\">  index.number_of_shards: 1</span><br><span class=\"line\">setup.kibana:</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">-------------------------- Elasticsearch output ------------------------------</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">output.elasticsearch:</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">Array of hosts to connect to.</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">hosts: [<span class=\"string\">&quot;localhost:9200&quot;</span>]</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">Optional protocol and basic auth credentials.</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">protocol: <span class=\"string\">&quot;https&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">username: <span class=\"string\">&quot;elastic&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">  #</span><span class=\"language-bash\">password: <span class=\"string\">&quot;changeme&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">----------------------------- Logstash output --------------------------------</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">注释掉ElasticSearch output中内内容让它不直接输出到ElasticSearch</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">修改Logstash output中的output.logstash.hosts为你的Logstash所在机器</span></span><br><span class=\"line\">output.logstash:</span><br><span class=\"line\">  hosts: [&quot;localhost:5044&quot;]</span><br><span class=\"line\">processors:</span><br><span class=\"line\">  - add_host_metadata: ~</span><br><span class=\"line\">  - add_cloud_metadata: ~</span><br></pre></td></tr></table></figure>\n\n<p>4.启动&#x2F;停止应用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost filebeat]# nohup ./filebeat -e -c filebeat.yml &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看应用进程</span></span><br><span class=\"line\">[root@localhost filebeat]# ps -aux|grep filebeat</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">杀死进程</span></span><br><span class=\"line\">[root@localhost filebeat]# kill -9 进程号</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"二、安装logstash\"><a href=\"#二、安装logstash\" class=\"headerlink\" title=\"二、安装logstash\"></a>二、安装logstash</h3><p>1.下载<a href=\"https://www.elastic.co/cn/downloads/logstash\">Logstash</a>并上传至服务器<code>/home/software</code>目录</p>\n<p>2.解压并重命名文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost /]# cd /home/software/</span><br><span class=\"line\">[root@localhost software]# tar -xvf logstash-7.4.0.tar.gz</span><br><span class=\"line\">[root@localhost software]# mv logstash-7.4.0 logstash</span><br></pre></td></tr></table></figure>\n\n<p>3.修改配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost software]# vim logstash/config/logstash-sample.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Sample Logstash configuration <span class=\"keyword\">for</span> creating a simple</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Beats -&gt; Logstash -&gt; Elasticsearch pipeline.</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">beats.port配置接收Filebeat的数据的端口</span></span><br><span class=\"line\">input &#123;</span><br><span class=\"line\">  beats &#123;</span><br><span class=\"line\">    port =&gt; 5044</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">output.elasticsearch配置在ElasticSearch中生成索引名的规则</span></span><br><span class=\"line\">output &#123;</span><br><span class=\"line\">  elasticsearch &#123;</span><br><span class=\"line\">    hosts =&gt; [&quot;http://localhost:9200&quot;]</span><br><span class=\"line\">    #在ElasticSearch中生成索引名的规则[logstash-job-center-2019.10.16]</span><br><span class=\"line\">    #这里通过生成不同的索引名来区分不同模块的日志文件</span><br><span class=\"line\">    #Filebeat中配置fields.app</span><br><span class=\"line\">    index =&gt; &quot;logstash-%&#123;[fields][app]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class=\"line\">    #user =&gt; &quot;elastic&quot;</span><br><span class=\"line\">    #password =&gt; &quot;changeme&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里的 filebeat.inputs 是可以定义多个的，每个 filebeat.inputs 对应一个微服务模块日志配置，我们可以在fields下面自定义一些属性，然后在logstash的配置文件中获取到这个自定义属性，通过判断自定义属性来对每个模块做个性化索引配置。</p>\n<p>4.启动&#x2F;停止应用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost logstash]# nohup ./bin/logstash -f ./config/logstash-sample.conf &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看应用进程</span></span><br><span class=\"line\">[root@localhost logstash]# ps -aux|grep logstash</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">杀死进程</span></span><br><span class=\"line\">[root@localhost logstash]# kill -9 进程号</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>5.错误处理</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread.exclusive is deprecated, use Thread::Mutex</span><br></pre></td></tr></table></figure>\n\n<p>解决：在 logstash.yml 文件中找到 Data path 的路径(默认在安装目录的data目录下）</p>\n<p>查看是否存在 .lock 文件，如果存在把它删除</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@ELK1 data]# ls -alh</span><br><span class=\"line\">总用量 20K</span><br><span class=\"line\">drwxr-sr-x  4 tingshuo staff 4.0K 8月 19 11:42 .</span><br><span class=\"line\">drwxr-sr-x 14 tingshuo staff 4.0K 8月 19 11:42 ..</span><br><span class=\"line\">drwxr-sr-x  2 tingshuo staff 4.0K 8月 19 11:42 dead_letter_queue</span><br><span class=\"line\">-rw-r--r--  1 tingshuo staff    0 8月 19 11:42 .lock</span><br><span class=\"line\">drwxr-sr-x  2 tingshuo staff 4.0K 8月 19 11:42 queue</span><br><span class=\"line\">-rw-r--r--  1 tingshuo staff   36 8月 19 11:42 uuid</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">删除带lock的文件</span></span><br><span class=\"line\">[root@ELK1 data]# rm .lock</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"三、安装ElasticSearch\"><a href=\"#三、安装ElasticSearch\" class=\"headerlink\" title=\"三、安装ElasticSearch\"></a>三、安装ElasticSearch</h3><p>1.下载<a href=\"https://www.elastic.co/cn/downloads/elasticsearch\">ElasticSearch</a>并上传至服务器<code>/home/software</code>目录</p>\n<p> 2.解压并重命名文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost /]# cd /home/software/</span><br><span class=\"line\">[root@localhost software]# tar -xvf elasticsearch-7.4.0-linux-x86_64.tar.gz</span><br><span class=\"line\">[root@localhost software]# mv elasticsearch-7.4.0-linux-x86_64 elasticsearch</span><br></pre></td></tr></table></figure>\n\n<p>3.修改配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[elk@localhost elasticsearch]$ vim config/elasticsearch.yml</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">如果配置集群，不同ElasticSearch节点的node.name和http.port需要保持唯一</span></span><br><span class=\"line\">cluster.name: my-app-1</span><br><span class=\"line\">node.name: node-1</span><br><span class=\"line\">network.host: 0.0.0.0</span><br><span class=\"line\">http.port: 9200</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">取消注释保留一个节点</span></span><br><span class=\"line\">cluster.initial_master_nodes: [&quot;node-1&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>4.非root用户启动设置</p>\n<p>我们需要创建一个elk用户和组，因为ElasticSearch不能以root身份运行，否则将会报错，执行以下命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">添加elk用户组</span></span><br><span class=\"line\">[root@localhost elasticsearch]# groupadd elk</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">为用户组添加elk用户</span></span><br><span class=\"line\">[root@localhost elasticsearch]# useradd -g elk elk</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">赋予权限</span></span><br><span class=\"line\">[root@localhost elasticsearch]# chown -R elk:elk /usr/local/elasticsearch</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">启动es</span></span><br><span class=\"line\">[elk@localhost elasticsearch]$ /home/software/elasticsearch/bin/elasticsearch -d</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">验证启动成功否、看到进程号就说明启动成功了</span></span><br><span class=\"line\">[elk@localhost elasticsearch]$ ps -aux|grep elasticsearch</span><br></pre></td></tr></table></figure>\n\n<p>5.启动&#x2F;停止应用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">-d后台启动</span></span><br><span class=\"line\">[root@localhost elasticsearch]# /home/software/elasticsearch/bin/elasticsearch -d</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看应用进程</span></span><br><span class=\"line\">[root@localhost elasticsearch]# ps -aux|grep elasticsearch</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">杀死进程</span></span><br><span class=\"line\">[root@localhost elasticsearch]# kill -9 进程号</span><br></pre></td></tr></table></figure>\n\n<p>6.启动报错</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[elk@localhost elasticsearch]$ ERROR: [3] bootstrap checks failed</span><br><span class=\"line\">[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]</span><br><span class=\"line\">[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span><br><span class=\"line\">[3]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>解决错误[1、2] 以root身份执行下面的脚本，执行后要重新登录普通账户启动ES</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\">echo &quot;* soft nofile 65536&quot;&gt;&gt;/etc/security/limits.conf</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;* hard nofile 65536&quot;&gt;&gt;/etc/security/limits.conf</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;* soft memlock unlimited&quot;&gt;&gt;/etc/security/limits.conf</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;* hard memlock unlimited&quot;&gt;&gt;/etc/security/limits.conf</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;vm.max_map_count = 262144&quot;&gt;&gt;/etc/sysctl.conf</span><br><span class=\"line\"></span><br><span class=\"line\">sysctl -p</span><br><span class=\"line\"></span><br><span class=\"line\">ulimit -l unlimited</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>解决错误[3]</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">取消注释保留一个节点</span></span><br><span class=\"line\">cluster.initial_master_nodes: [&quot;node-1&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>7.验证</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[elk@localhost elasticsearch]$ curl http://localhost:9200/</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot; : &quot;node-1&quot;,</span><br><span class=\"line\">  &quot;cluster_name&quot; : &quot;my-app-1&quot;,</span><br><span class=\"line\">  &quot;cluster_uuid&quot; : &quot;7i63wZl1SPCbsuQCJjrK5g&quot;,</span><br><span class=\"line\">  &quot;version&quot; : &#123;</span><br><span class=\"line\">    &quot;number&quot; : &quot;7.4.0&quot;,</span><br><span class=\"line\">    &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class=\"line\">    &quot;build_type&quot; : &quot;tar&quot;,</span><br><span class=\"line\">    &quot;build_hash&quot; : &quot;22e1767283e61a198cb4db791ea66e3f11ab9910&quot;,</span><br><span class=\"line\">    &quot;build_date&quot; : &quot;2019-09-27T08:36:48.569419Z&quot;,</span><br><span class=\"line\">    &quot;build_snapshot&quot; : false,</span><br><span class=\"line\">    &quot;lucene_version&quot; : &quot;8.2.0&quot;,</span><br><span class=\"line\">    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,</span><br><span class=\"line\">    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"四、安装Kibana\"><a href=\"#四、安装Kibana\" class=\"headerlink\" title=\"四、安装Kibana\"></a>四、安装Kibana</h3><p> 1.下载<a href=\"https://www.elastic.co/cn/downloads/kibana\">Kibana</a>并上传至服务器<code>/home/software</code>目录</p>\n<p>2.解压并重命名文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost /]# cd /home/software/</span><br><span class=\"line\">[root@localhost software]# tar -xvf kibana-7.4.0-linux-x86_64.tar.gz</span><br><span class=\"line\">[root@localhost software]# mv kibana-7.4.0-linux-x86_64 kibana</span><br></pre></td></tr></table></figure>\n\n<p>3.修改配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server.port: 5601</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">这里需要需改为实际IP，否则外部浏览器无法访问</span></span><br><span class=\"line\">server.host: &quot;192.xxx.xxx.xxx&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">汉化</span></span><br><span class=\"line\">i18n.locale: &quot;zh-CN&quot;</span><br></pre></td></tr></table></figure>\n\n<p>4.启动&#x2F;停止应用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">后台启动</span></span><br><span class=\"line\">[elk@localhost kibana]$ nohup ./bin/kibana --allow-root &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看应用进程</span></span><br><span class=\"line\">[root@localhost kibana]# ps -aux|grep kibana</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">杀死进程</span></span><br><span class=\"line\">[root@localhost kibana]# kill -9 进程号</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">以上查不到进程则使用如下命令</span></span><br><span class=\"line\">[root@localhost config]# netstat -tunlp|grep 5601</span><br></pre></td></tr></table></figure>\n\n<p>5.Kibana设置</p>\n<ul>\n<li>访问浏览器：http:&#x2F;&#x2F;本机ip:5601</li>\n</ul>\n<ul>\n<li><p>管理–&gt;索引模式–&gt;创建索引模式</p>\n</li>\n<li><p>在Discover查看我们刚刚建立的索引规则匹配到的索引数据，如图所示</p>\n</li>\n</ul>\n","categories":[],"tags":[]}