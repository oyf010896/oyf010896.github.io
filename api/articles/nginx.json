{"title":"nginx平滑升级","slug":"nginx","date":"2022-07-29T03:13:29.000Z","updated":"2022-07-29T04:09:37.632Z","comments":true,"path":"api/articles/nginx.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<h4 id=\"nginx平滑升级\"><a href=\"#nginx平滑升级\" class=\"headerlink\" title=\"nginx平滑升级\"></a>nginx平滑升级</h4><h5 id=\"1-把nginx高版本的压缩包拷到服务器上，解压到-x2F-usr-x2F-local-x2F-目录下\"><a href=\"#1-把nginx高版本的压缩包拷到服务器上，解压到-x2F-usr-x2F-local-x2F-目录下\" class=\"headerlink\" title=\"1.把nginx高版本的压缩包拷到服务器上，解压到&#x2F;usr&#x2F;local&#x2F;目录下\"></a>1.<strong>把nginx高版本的压缩包拷到服务器上，解压到&#x2F;usr&#x2F;local&#x2F;目录下</strong></h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf nginx-*.**.*.tar.gz -C /usr/local/</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-进行configure配置并编译\"><a href=\"#2-进行configure配置并编译\" class=\"headerlink\" title=\"2.进行configure配置并编译\"></a>2.<strong>进行configure配置并编译</strong></h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure  --prefix=/usr/local/nginx/ --user=nginx --group=nginx --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module  --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-threads  --with-stream  --with-stream_ssl_module --with-http_slice_module --with-file-aio --with-http_v2_module</span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"3-把之前的nginx文件备份\"><a href=\"#3-把之前的nginx文件备份\" class=\"headerlink\" title=\"3.把之前的nginx文件备份\"></a>3.<strong>把之前的nginx文件备份</strong></h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /usr/local/nginx/sbin/nginx nginx.old</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"4-然后返回nginx-1-14-2下的objs目录，把新的nginx拷贝过来\"><a href=\"#4-然后返回nginx-1-14-2下的objs目录，把新的nginx拷贝过来\" class=\"headerlink\" title=\"4.然后返回nginx-1.14.2下的objs目录，把新的nginx拷贝过来\"></a>4.然后返回nginx-1.14.2下的objs目录，把新的nginx拷贝过来</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /usr/local/nginx-*.**.*/objs/nginx /usr/local/nginx/sbin/</span><br></pre></td></tr></table></figure>\n\n<p><strong>5.到&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin下查看nginx版本，检出配置文件，启动nginx</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/nginx/sbin/nginx -v   (检查版本)</span><br><span class=\"line\">/usr/local/nginx/sbin/nginx -t  （检查配置文件）</span><br><span class=\"line\">/usr/local/nginx/sbin/nginx -s reload （重载）</span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[]}